{% extends 'layout.html' %}

{% block body%}
<title>DOM Calculator</title>
<meta charset="utf-8">
<script src="Assets/Js/calc.js"></script>
<link rel="stylesheet" href="static/styles/calc.css">
<script>
    function display(character)
{
    var screen = document.getElementById("display");

    // The two special cases are the clear and eqauls buttons, otherwise we can just append the passed character to the end of our text box
    if (character === "=")
    {
        screen.value = eval(screen.value);
    }
    else if (character === "c")
    {
        screen.value = " ";
    }
    else
    {
        screen.value = screen.value + character;
    }

}

function checkKeyPress()
{

    var screen = document.getElementById("display");
    // Array which stores all the valid entries' keycodes
    var allValidEntries = [13, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 67, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 109, 110, 111, 187, 189, 190, 191]
    var currentPressedKey = event.keyCode;

    // If the current pressed keycode is found inside the array of valid entries
    if(allValidEntries.includes(currentPressedKey))
    {
       if(currentPressedKey === 13) // Enter Key
       {
           screen.value = eval(screen.value)
       }
        else if(currentPressedKey === 67) // C key, which will clear the textbox
        {
            event.preventDefault();
            screen.value = " ";
        }
    }
    else
    {
        // Prevents the default action, which is adding the character to the textbox (in most cases)
        // This only fires if the key pressed is not a number or math symbol, as defined by the keycodes for those buttons stored in our array
        event.preventDefault();
    }
}
function getElement(){  //inserts this line, makes the form information look cleaner
        return document.getElementById("display");
}
</script>
    <body>
        <div class="outerContainer">
            <form class="container" method="POST">
                <input id="display" type="text" maxlength="30" name="display" value="{{result}}" onclick="this.select()" onKeyDown="checkKeyPress()"/>
                <input class="calcButton" value="C" id="c" type="button" onclick="getElement().value=''"/>
                <input class="calcButton" value="=" id="equals" type="submit" onclick="display('=')"/>
                <input class="calcButton" value="1" id="one" type="button" onclick="getElement().value+='1'"/>
                <input class="calcButton" value="2" id="two" type="button" onclick="getElement().value+='2'"/>
                <input class="calcButton" value="3" id="three" type="button" onclick="getElement().value+='3'"/>
                <input class="calcButton" value="4" id="four" type="button" onclick="getElement().value+='4'"/>
                <input class="calcButton" value="5" id="five" type="button" onclick="getElement().value+='5'"/>
                <input class="calcButton" value="6" id="six" type="button" onclick="getElement().value+='6'"/>
                <input class="calcButton" value="7" id="seven" type="button" onclick="getElement().value+='7'"/>
                <input class="calcButton" value="8" id="eight" type="button" onclick="getElement().value+='8'"/>
                <input class="calcButton" value="9" id="nine" type="button" onclick="getElement().value+='9'"/>
                <input class="calcButton" value="0" id="zero" type="button" onclick="getElement().value+='0'"/>
                <input class="calcButton" value="." id="dec" type="button" onclick="getElement().value+='.'"/>
                <input class="calcButton" value="+" id="plus" type="button" onclick="getElement().value+='+'"/>
                <input class="calcButton" value="-" id="minus" type="button" onclick="getElement().value+='-'"/>
                <input class="calcButton" value="*" id="star" type="button" onclick="getElement().value+='*'"/>
                <input class="calcButton" value="/" id="slash" type="button" onclick="getElement().value+='/'"/>
            </form>
        </div>
        <div>
            <br>
            <a class="fancyButton" href="/">Go Home</a>
            <!--<p id="answer">{{result}}</p>-->
        </div>
    </body>



{% endblock %}
